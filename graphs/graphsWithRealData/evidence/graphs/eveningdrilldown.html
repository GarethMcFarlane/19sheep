<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="helpingmethods.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  </head>
  <body>
    <div id="chart_div" style="width: 400px; height: 240px;"></div>
    <div id="description" style="width: 400px;">
      <p id="deepDuration">Deep Sleep hours: </p>
      <p id="avgDeep">Average Deep Sleep Hours: </p>
      <p id="deepInstance">Deep Sleep Instances: </p>
      <p id="lightDuration">Light Sleep Hours: </p>
      <p id="avgLight">Average Light Sleep hours: </p>
      <p id="lightInstance">Light Sleep Instances: </p>
      <p id="wakeDuration">Awake hours: </p>
      <p id="avgWake">Average Awake Hours: </p>
      <p id="wakeInstance">Awake Instances: </p>
    </div>

    <script type="text/javascript">
      google.load("visualization", "1", {packages:["gauge"]});
      google.setOnLoadCallback(drawChart);
      var days = [{"status":0,"body":{"model":16,"series":[{"startdate":1442685060,"state":0,"enddate":1442685180},{"startdate":1442685180,"state":1,"enddate":1442685360},{"startdate":1442685360,"state":2,"enddate":1442685960},{"startdate":1442685960,"state":1,"enddate":1442686680},{"startdate":1442686680,"state":2,"enddate":1442687520},{"startdate":1442687520,"state":1,"enddate":1442689920},{"startdate":1442689920,"state":2,"enddate":1442690520},{"startdate":1442690520,"state":1,"enddate":1442693040},{"startdate":1442693040,"state":2,"enddate":1442693400},{"startdate":1442693400,"state":1,"enddate":1442694600},{"startdate":1442694600,"state":2,"enddate":1442694780},{"startdate":1442694780,"state":1,"enddate":1442694960},{"startdate":1442694960,"state":0,"enddate":1442695500}]}},{"status":0,"body":{"model":16,"series":[{"startdate":1442581920,"state":0,"enddate":1442582220},{"startdate":1442582220,"state":1,"enddate":1442582400},{"startdate":1442582400,"state":2,"enddate":1442582700},{"startdate":1442582700,"state":1,"enddate":1442583480},{"startdate":1442583480,"state":2,"enddate":1442583900},{"startdate":1442583900,"state":1,"enddate":1442584680},{"startdate":1442584680,"state":2,"enddate":1442585340},{"startdate":1442585340,"state":1,"enddate":1442586060},{"startdate":1442586060,"state":2,"enddate":1442589960},{"startdate":1442589960,"state":1,"enddate":1442591040},{"startdate":1442591040,"state":2,"enddate":1442593860},{"startdate":1442593860,"state":1,"enddate":1442596620},{"startdate":1442596620,"state":2,"enddate":1442598360},{"startdate":1442598360,"state":1,"enddate":1442599440},{"startdate":1442599440,"state":0,"enddate":1442599860},{"startdate":1442599860,"state":1,"enddate":1442602980},{"startdate":1442602980,"state":2,"enddate":1442603820},{"startdate":1442603820,"state":1,"enddate":1442604060}]}},{"status":0,"body":{"model":16,"series":[{"startdate":1442492040,"state":0,"enddate":1442492520},{"startdate":1442492520,"state":1,"enddate":1442492820},{"startdate":1442492820,"state":2,"enddate":1442496660},{"startdate":1442496660,"state":1,"enddate":1442499060},{"startdate":1442499060,"state":2,"enddate":1442503440},{"startdate":1442503440,"state":1,"enddate":1442504580},{"startdate":1442504580,"state":2,"enddate":1442506740},{"startdate":1442506740,"state":1,"enddate":1442507460},{"startdate":1442507460,"state":2,"enddate":1442508420},{"startdate":1442508420,"state":1,"enddate":1442509080},{"startdate":1442509080,"state":0,"enddate":1442509920},{"startdate":1442509920,"state":1,"enddate":1442510580},{"startdate":1442510580,"state":2,"enddate":1442511180},{"startdate":1442511180,"state":1,"enddate":1442513700},{"startdate":1442513700,"state":2,"enddate":1442516100},{"startdate":1442516100,"state":1,"enddate":1442517240},{"startdate":1442517240,"state":2,"enddate":1442517420}]}}];
      var data = getData(days[0]);
      var value = getFinalSleepScore(0,getSleepScore("evening",2,data));
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          [' ', value]
          ]);

        var options = {
          min:0, max:60,
          width: 800, height: 240,
          redFrom: 0, redTo: 12,
          yellowFrom: 12, yellowTo: 30,
          greenFrom: 30, greenTo: 60,
          minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));

        chart.draw(data, options);

        // setInterval(function() {
        //   data.setValue(0, 1, 1);
        //   chart.draw(data, options);
        // }, 13000);

        
      var temp = getDuration("evening",2,data);
      $("#deepDuration").append(temp.toFixed(2));
      temp = getAverageDuration("evening",2,data);
      $("#avgDeep").append(temp.toFixed(2));
      temp = getInstance("evening",2,data);
      $("#deepInstance").append(temp);
      temp = getDuration("evening",1,data);
      $("#lightDuration").append(temp.toFixed(2));
      temp = getAverageDuration("evening",1,data);
      $("#avgLight").append(temp.toFixed(2));
      temp = getInstance("evening",1,data);
      $("#lightInstance").append(temp.toFixed(0));
      temp = getDuration("evening",0,data);
      $("#wakeDuration").append(temp.toFixed(2));
      temp = getAverageDuration("evening",0,data);
      $("#avgWake").append(temp.toFixed(2));
      temp = getInstance("evening",0,data);
      $("#wakeInstance").append(temp.toFixed(0));
      }
    </script>


  </body>
</html>